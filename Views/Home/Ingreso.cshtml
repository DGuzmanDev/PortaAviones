@{
    ViewData["Title"] = "Ingreso";
}

@section Scripts {
    <script src="~/js/ingreso.js" asp-append-version="true"></script>
}

<div class="modal fade" id="modal_confirm" tabindex="-1" aria-labelledby="modal_confirmLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header main-header">
                <h5 class="modal-title" id="modal_confirmLabel">Limpiar datos sin guardar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <p class="fw-bold">¿Está seguro que desea limpiar los cambios sin guardar?</p>
                    <p>Esta acción es irreversible y deberá iniciar el proceso nuevamente.</p>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container">
                    <div class="d-flex justify-content-end">
                        <button id="close_confirm" type="button" class="btn btn-secondary"
                            data-bs-dismiss="modal">Cancelar</button>
                        <button id="limpiar_confirm" type="button" class="btn btn-primary btn btn-primary mx-2"
                            aria-label="Guardar cambios">Confirmar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<section id="formulario">
    <div class="container">
        <div class="row">
            <legend class="my-2">Datos del nuevo ingreso</legend>
            <div class="col-sm border rounded">
                <form id="formulario_registro" class="needs-validation py-2">
                    <fieldset>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label" for="Tecnico">Técnico encargado</label>
                                <input class="form-control" type="text" name="Tecnico" id="Tecnico" required />
                                <div class="invalid-feedback" id="error_tecnico">
                                    El nombre del técnico es requerido
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label" for="Marca">Marca</label>
                                <select class="form-select" name="Marca" id="Marca" required></select>
                                <div class="invalid-feedback" id="error_marca">
                                    La marca es requerida
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label" for="Modelo">Modelo</label>
                                <select class="form-select" name="Modelo" id="Modelo" required></select>
                                <div class="invalid-feedback" id="error_modelo">
                                    El modelo es requerido
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label" for="Serie">Número de serie:</label>
                                <input class="form-control" type="text" name="Serie" id="Serie" required />
                                <div class="invalid-feedback" id="error_serie">
                                    El número de serie
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label" for="Nombre">Nombre de fantasía</label>
                                <input class="form-control" type="text" name="Nombre" id="Nombre" required />
                                <div class="invalid-feedback" id="error_nombre">
                                    El nombre de fantasía es requerido
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <label class="form-label" for="Ancho">Ancho en metros</label>
                                <input class="form-control" type="number" name="Ancho" id="Ancho" required />
                                <div class="invalid-feedback" id="error_ancho">
                                    El ancho de ala a ala es requerido
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="form-label" for="Alto">Alto en metros</label>
                                <input class="form-control" type="number" name="Alto" id="Alto" required />
                                <div class="invalid-feedback" id="error_alto">
                                    El alto es requerido
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="form-label" for="Largo">Largo en metros</label>
                                <input class="form-control" type="number" name="Largo" id="Largo" required />
                                <div class="invalid-feedback" id="error_largo">
                                    El largo es requerido
                                </div>
                            </div>
                        </div>
                        <div class="invalid-feedback" id="error_formulario">
                            <div class="d-flex justify-content-center my-4">
                                Por favor revise el formulario y complete la información requerida antes de continuar
                            </div>
                        </div>
                        <div class="valid-feedback" id="exito_formulario">
                            <div class="d-flex justify-content-center my-4">
                                Se han agregado los datos del nuevo avión
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <button class="btn btn-secondary w-100" type="button" id="limpiar"
                                    data-bs-toggle="modal" data-bs-target="#modal_confirm"
                                    data-bs-target-value="parcial">
                                    Limpiar <i class="fa-solid fa-trash-alt px-4"></i></i>
                                </button>
                            </div>
                            <div class="col-sm-6">
                                <button class="btn btn-primary w-100" type="submit" id="agregar"
                                    form="formulario_registro">
                                    Agregar <i class="fa-solid fa-plus px-4"></i>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="container pt-4 pb-4">
    <hr class="light-gradient-hr thick">
</section>

<section id="tabla" class="container">
    <legend class="my-2">Listado de aviones a ingresar</legend>
    <section id="tabla_ingreso" class="mt-4">
        <div class="table-responsive py-2">
            <table class="table table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Marca</th>
                        <th>Modelo</th>
                        <th>Serie</th>
                        <th>Nombre</th>
                        <th>Ancho</th>
                        <th>Alto</th>
                        <th>Largo</th>
                    </tr>
                </thead>
                <tbody id="ingreso-body">
                    <tr>
                        <td>No se han ingresado datos</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="invalid-feedback" id="error_ingreso">
            <div class="d-flex justify-content-center my-4">
                <p id="error_ingreso_msg"></p>
            </div>
        </div>
    </section>
</section>

<section id="botones_accion" class="container mt-4">
    <div class="invalid-feedback" id="error_registro">
        <div class="d-flex justify-content-center my-4">
            Por favor ingrese los datos de al menos un avión para poder continuar con el proceso
        </div>
    </div>
    <div class="valid-feedback" id="exito_registro">
        <div class="d-flex justify-content-center my-4">
            El registro de los nuevos ingresos se ha completado con éxito
        </div>
    </div>
    <div class="row my-3 py-3">
        <div class="col-sm-4">
            <button class="btn btn-danger w-100" type="button" id="limpiar_todo" data-bs-toggle="modal"
                data-bs-target="#modal_confirm" data-bs-target-value="total">
                Limpiar todo <i class="fa-solid fa-trash-alt px-4"></i></i>
            </button>
        </div>
        <div class="col-sm-4">
            <button class="btn btn-primary w-100" type="submit" id="enviar">
                Guardar <i class="fa-solid fa-paper-plane px-4"></i>
            </button>
        </div>
    </div>
</section>
